<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truck Optimization</title>
    <!-- Bootstrap CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</head>
<style>
#map {
    position: absolute;
    top: 0;
    bottom: 0;
    width: 100%;
}

</style>

<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4 text-primary">Truck Route Optimization</h1>     

            <form method="post" action="/optimize" class="bg-white p-4 rounded shadow-sm">

                <div class="mb-3">
                    <div class="col-lg-6">
                <input type="file" class="form-control-file" id="csvFile" name="csvFile" accept=".csv">
                    <label for="csvFile">Upload addresses and delivery needs</label>
                </div>
                </div>
                    <div class="mb-3">
                        <label for="addresses" class="form-label">Enter Addresses (one per line):</label>
                        <textarea id="addresses" name="addresses" rows="8" class="form-control"></textarea>
                    </div>
                    <div class="mb-3">
                        <label for="demands" class="form-label">Enter Demands (comma-separated, match address
                            order):</label>
                        <input id="demands" name="demands" type="text" class="form-control" required
                            placeholder="e.g. 0,1,2,3">
                    </div>
                    <div class="mb-3">
                        <label for="numTrucks" class="form-label">Number of Trucks:</label>
                        <input id="numTrucks" name="numTrucks" type="number" min="1" value="3" class="form-control"
                            required>
                    </div>

                    <div class="mb-3">
                        <label for="capacity" class="form-label">Capacity of Trucks (pallets):</label>
                        <input id="capacity" name="capacity" type="number" min="1" value="10" class="form-control"
                            required>
                    </div>
                    <button type="submit" class="btn btn-primary w-100">Optimize Routes</button>
            </form>


        <div class="mb-3" style="padding-top: 1vh;">
            <div class="results bg-white p-4 rounded shadow-sm mt-4 mt-lg-0">
                <h2 class="h4 mb-3">Results</h2>
                <div id="results-content">
                    
                    <!-- Example: Route for Truck 1: ... -->
                </div>
            </div>
        </div>
        <!-- <div id="map" style="height: 400px; margin-top: 20px;"></div> -->
    </div>
    <!-- Bootstrap JS (optional, for interactivity) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // This array can be populated from backend or via API
const coordinates = [
  [39.9612, -82.9988], // Columbus, OH
  [41.4993, -81.6944], // Cleveland, OH
  [39.7684, -86.1581], // Indianapolis, IN
];


  var map = L.map('map').setView([40.0, -83.0], 7); // Centered on Ohio/Indiana
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  tileSize: 102,
    maxZoom: 18,
    attribution: 'Â© OpenStreetMap contributors'
  }).addTo(map);

coordinates.forEach((coord, index) => {
  L.marker(coord).addTo(map).bindPopup(`Stop ${index + 1}`);
});
L.polyline(coordinates, { color: 'blue' }).addTo(map);
</script>
</body>

</html>